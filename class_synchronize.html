<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Base Framework: Synchronize&lt; LOCK &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Base Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_synchronize-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Synchronize&lt; LOCK &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__concurrency.html">Concurrency</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A stack based wrapper of a synchronize able class.  
 <a href="class_synchronize.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_synchronize_8h_source.html">base/concurrency/Synchronize.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a779c956364afe0e6ab028902347a5afd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_synchronize.html#a779c956364afe0e6ab028902347a5afd">Synchronize</a> (const <a class="el" href="class_synchronizeable.html">Synchronizeable</a>&lt; LOCK &gt; &amp;_object, bool exclusive=true) noexcept</td></tr>
<tr class="separator:a779c956364afe0e6ab028902347a5afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43232228676c8ffb5f46452c4db7cff0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_synchronize.html#a43232228676c8ffb5f46452c4db7cff0">~Synchronize</a> () noexcept</td></tr>
<tr class="separator:a43232228676c8ffb5f46452c4db7cff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class LOCK&gt;<br />
class Synchronize&lt; LOCK &gt;</h3>

<p>A stack based wrapper of a synchronize able class. </p>
<p>This is a stack based wrapper of a synchronize able class. A <a class="el" href="class_synchronize.html" title="A stack based wrapper of a synchronize able class.">Synchronize</a> object will acquire and release an exclusive (or a shared lock) on the provided synchronize able object when it is, respectively, created and destroyed. If required, the lock can be explicitly released by calling the method release(). This is required before throwing an exception.</p>
<p>Three macros have been provided for easy use of this class: SynchronizeExclusively(), SynchronizeShared(), and SynchronizeRelease(). These macros should be used like any normal function.</p>
<p>SynchronizeExclusively(): Selects exclusively synchronization of the current scope within a synchronize able class (<a class="el" href="class_synchronizeable.html">Synchronizeable</a>). The macro manages this by creating a temporary <a class="el" href="class_synchronize.html" title="A stack based wrapper of a synchronize able class.">Synchronize</a> object called '_sync' on the stack. Please note that the variable '_sync' is reserved for this purpose and should not be used elsewhere to avoid misunderstandings. You should only use the provided macros to access the variable '_sync'.</p>
<p>SynchronizeShared(): Works the same way as SynchronizeExclusively() but, as the name suggests, acquires a shared lock.</p>
<p>SynchronizeRelease(): If required, you can release the lock explicitly by using SynchronizeRelease().</p>
<p>The macros are intended to be used within a template class that takes a template argument called LOCK and is a base class of Synchronizeable&lt;LOCK&gt;. Like illustrated by this example:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> LOCK = DefaultLock&gt;</div>
<div class="line"><span class="keyword">class </span>MyClass : <span class="keyword">public</span> <a class="code" href="class_synchronizeable.html">Synchronizeable</a>&lt;LOCK&gt; {</div>
<div class="line">  <span class="comment">// stuffing goes here :-)</span></div>
<div class="line">};</div>
</div><!-- fragment --><p>However, if you for some reason want to use these macros within a class that does not take a template argument LOCK, you must define LOCK explicitly and identical to the template argument of the base class <a class="el" href="class_synchronizeable.html" title="Wrapper for a synchronization object.">Synchronizeable</a>. Like this:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyClass : <span class="keyword">public</span> <a class="code" href="class_synchronizeable.html">Synchronizeable</a>&lt;DefaultLock&gt; {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keyword">typedef</span> <a class="code" href="class_unsafe.html">DefaultLock</a> LOCK;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> myFirstMethod() const noexcept {</div>
<div class="line">    SynchronizeShared();</div>
<div class="line">    <span class="comment">// do something as long as it doesn&#39;t modify the object</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> mySecondMethod() noexcept {</div>
<div class="line">    SynchronizeExclusive();</div>
<div class="line">    <span class="comment">// do modification of object</span></div>
<div class="line">  }</div>
<div class="line">};</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_synchronizeable.html" title="Wrapper for a synchronization object.">Synchronizeable</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a779c956364afe0e6ab028902347a5afd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779c956364afe0e6ab028902347a5afd">&#9670;&nbsp;</a></span>Synchronize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LOCK &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_synchronize.html">Synchronize</a>&lt; LOCK &gt;::<a class="el" href="class_synchronize.html">Synchronize</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_synchronizeable.html">Synchronizeable</a>&lt; LOCK &gt; &amp;&#160;</td>
          <td class="paramname"><em>_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes the synchronization object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>The synchronize able object to be synchronized. </td></tr>
    <tr><td class="paramname">exclusive</td><td>Specifies if the lock should be exclusive (write-lock) or shared (read-lock). Default is exclusive. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a43232228676c8ffb5f46452c4db7cff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43232228676c8ffb5f46452c4db7cff0">&#9670;&nbsp;</a></span>~Synchronize()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class LOCK &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_synchronize.html">Synchronize</a>&lt; LOCK &gt;::~<a class="el" href="class_synchronize.html">Synchronize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Forces the lock to be released. Releases the lock if not already released and destroys the synchronization object. </p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aclass_synchronizeable_html"><div class="ttname"><a href="class_synchronizeable.html">Synchronizeable</a></div><div class="ttdoc">Wrapper for a synchronization object.</div><div class="ttdef"><b>Definition:</b> Synchronizeable.h:58</div></div>
<div class="ttc" id="aclass_unsafe_html"><div class="ttname"><a href="class_unsafe.html">Unsafe</a></div><div class="ttdoc">Select no synchronization.</div><div class="ttdef"><b>Definition:</b> Synchronizeable.h:35</div></div>
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"></address>
</body>
</html>
