<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Base Framework: testsuite/ftp.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Base Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">testsuite/ftp.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/***************************************************************************</span></div>
<div class="line"><span class="comment">    The Base Framework</span></div>
<div class="line"><span class="comment">    A framework for developing platform independent applications</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    See COPYRIGHT.txt for details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    This framework is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    For the licensing terms refer to the file &#39;LICENSE&#39;.</span></div>
<div class="line"><span class="comment"> ***************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;base/Application.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/string/FormatInputStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/string/FormatOutputStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/string/StringOutputStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/UnsignedInteger.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/net/StreamSocket.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/net/ServerSocket.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/net/InetInterface.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/net/InetService.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/net/InetEndPoint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/concurrency/Thread.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/Primitives.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/Timer.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/io/File.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;base/net/Url.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>com::azure::dev::base;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// prepend with FileTransferProtocolClient::</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Access control commands</span></div>
<div class="line"><span class="keyword">const</span> <a name="_a0"></a><a class="code" href="class_literal.html">Literal</a> CMD_ACCOUNT = MESSAGE(<span class="stringliteral">&quot;ACCT&quot;</span>); <span class="comment">// set account</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_CDUP = MESSAGE(<span class="stringliteral">&quot;CDUP&quot;</span>); <span class="comment">// change to parent directory</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_CWD = MESSAGE(<span class="stringliteral">&quot;CWD&quot;</span>); <span class="comment">// change working directory</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_LOGOUT = MESSAGE(<span class="stringliteral">&quot;QUIT&quot;</span>); <span class="comment">// logout</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_PASSWORD = MESSAGE(<span class="stringliteral">&quot;PASS&quot;</span>); <span class="comment">// set password</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_REINITIALIZE = MESSAGE(<span class="stringliteral">&quot;REIN&quot;</span>); <span class="comment">// reinitialize</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_USER = MESSAGE(<span class="stringliteral">&quot;USER&quot;</span>); <span class="comment">// set user</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Transfer parameter commands</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_DATA_PORT = MESSAGE(<span class="stringliteral">&quot;PORT&quot;</span>); <span class="comment">// set host data connection port</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_PASSIVE = MESSAGE(<span class="stringliteral">&quot;PASV&quot;</span>); <span class="comment">// request passive mode</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_REPRESENTATION = MESSAGE(<span class="stringliteral">&quot;TYPE&quot;</span>); <span class="comment">// request data representation (AEIL)</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_FILE_STRUCTURE = MESSAGE(<span class="stringliteral">&quot;STRU&quot;</span>); <span class="comment">// request file structure (file/record/page)</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_TRANSFER_MODE = MESSAGE(<span class="stringliteral">&quot;MODE&quot;</span>); <span class="comment">// (stream/block/compressed)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// FTP service commands</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_RETRIEVE = MESSAGE(<span class="stringliteral">&quot;RETR&quot;</span>); <span class="comment">// retrieve file from server</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_STORE = MESSAGE(<span class="stringliteral">&quot;STOR&quot;</span>); <span class="comment">// store file on server</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_STORE_UNIQUE = MESSAGE(<span class="stringliteral">&quot;STOU&quot;</span>); <span class="comment">// store unique file on server</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_APPEND = MESSAGE(<span class="stringliteral">&quot;APPE&quot;</span>); <span class="comment">// append data to file on server</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_ALLOCATE = MESSAGE(<span class="stringliteral">&quot;ALLO&quot;</span>); <span class="comment">// allocate storage for specified number of bytes</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_RESTART = MESSAGE(<span class="stringliteral">&quot;REST&quot;</span>); <span class="comment">// restart transfer at marker</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_RENAME_FROM = MESSAGE(<span class="stringliteral">&quot;RNFR&quot;</span>); <span class="comment">// rename from</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_RENAME_TO = MESSAGE(<span class="stringliteral">&quot;RNTO&quot;</span>); <span class="comment">// rename to</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_ABORT = MESSAGE(<span class="stringliteral">&quot;ABOR&quot;</span>); <span class="comment">// abort transfers</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_DELETE = MESSAGE(<span class="stringliteral">&quot;DELE&quot;</span>); <span class="comment">// delete file</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_REMOVE_DIRECTORY = MESSAGE(<span class="stringliteral">&quot;RMD&quot;</span>); <span class="comment">// remove directory</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_MAKE_DIRECTORY = MESSAGE(<span class="stringliteral">&quot;MKD&quot;</span>); <span class="comment">// make directory</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_PWD = MESSAGE(<span class="stringliteral">&quot;PWD&quot;</span>); <span class="comment">// print working directory</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_LIST = MESSAGE(<span class="stringliteral">&quot;LIST&quot;</span>); <span class="comment">// list directory or file content</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_NAME_LIST = MESSAGE(<span class="stringliteral">&quot;NLST&quot;</span>); <span class="comment">// request name list</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_SITE = MESSAGE(<span class="stringliteral">&quot;SITE&quot;</span>); <span class="comment">// site specific</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_SYSTEM = MESSAGE(<span class="stringliteral">&quot;SYST&quot;</span>); <span class="comment">// system type</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_STATUS = MESSAGE(<span class="stringliteral">&quot;STAT&quot;</span>); <span class="comment">// status</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_HELP = MESSAGE(<span class="stringliteral">&quot;HELP&quot;</span>); <span class="comment">// request help</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="class_literal.html">Literal</a> CMD_NOOP = MESSAGE(<span class="stringliteral">&quot;NOOP&quot;</span>); <span class="comment">// no operation</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>FTPException : <span class="keyword">public</span> <a name="_a1"></a><a class="code" href="class_i_o_exception.html">IOException</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">inline</span> FTPException()</div>
<div class="line">  {</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">inline</span> FTPException(<span class="keyword">const</span> <span class="keywordtype">char</span>* message)</div>
<div class="line">    : <a class="code" href="class_i_o_exception.html">IOException</a>(message)</div>
<div class="line">  {</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>FileTransferProtocolClient : <span class="keyword">public</span> <a name="_a2"></a><a class="code" href="class_object.html">Object</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DEFAULT_RETRY_DELAY = 15;</div>
<div class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DEFAULT_RETRY_ATTEMPTS = 5;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">enum</span> Verbosity {SILENT, SHORT, ALL, DEBUG_NORMAL, DEBUG_EXTENDED};</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">enum</span> Reply {POSITIVE_PRELIMINARY, POSITIVE, POSITIVE_INTERMEDIATE, NEGATIVE, PERMANENT_NEGATIVE};</div>
<div class="line">  <span class="keyword">enum</span> ReplyGroup {SYNTAX, INFORMATION, CONNECTIONS, AUTHENTICATION, UNSPECIFIED, FILESYSTEM};</div>
<div class="line">  <span class="keyword">enum</span> Representation {ASCII, EBCDIC, BINARY, LOCALSIZE};</div>
<div class="line">  <span class="keyword">enum</span> Mode {STREAM, BLOCK, COMPRESSED};</div>
<div class="line">  <span class="keyword">enum</span> Structure {FILE, RECORD, PAGE};</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Reply reply;</div>
<div class="line">    ReplyGroup group;</div>
<div class="line">    <span class="keywordtype">int</span> minor;</div>
<div class="line">    <span class="keywordtype">int</span> code;</div>
<div class="line">    <span class="keywordtype">bool</span> valid;</div>
<div class="line">  } ReplyCode;</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"> </div>
<div class="line">  <a name="_a3"></a><a class="code" href="class_inet_end_point.html">InetEndPoint</a> endPoint;</div>
<div class="line">  <a name="_a4"></a><a class="code" href="class_stream_socket.html">StreamSocket</a> controlConnection;</div>
<div class="line">  <a class="code" href="class_stream_socket.html">StreamSocket</a> dataConnection;</div>
<div class="line">  <a name="_a5"></a><a class="code" href="class_server_socket.html">ServerSocket</a> serverDataConnection;</div>
<div class="line">  <a class="code" href="class_stream_socket.html">StreamSocket</a> activeDataConnection;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">bool</span> responsePending = <span class="keyword">false</span>;</div>
<div class="line">  <a name="_a6"></a><a class="code" href="class_string.html">String</a> response;</div>
<div class="line">  ReplyCode replyCode;</div>
<div class="line">  Verbosity verbosity;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> retryDelay = 0;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> retryAttempts = 0;</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">bool</span> translateReplyCode(</div>
<div class="line">    <span class="keywordtype">char</span> a, <span class="keywordtype">char</span> b, <span class="keywordtype">char</span> c, ReplyCode&amp; result) {</div>
<div class="line">    result.valid = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (a) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>:</div>
<div class="line">      result.reply = POSITIVE_PRELIMINARY;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>:</div>
<div class="line">      result.reply = POSITIVE;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>:</div>
<div class="line">      result.reply = POSITIVE_INTERMEDIATE;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>:</div>
<div class="line">      result.reply = NEGATIVE;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div>
<div class="line">      result.reply = PERMANENT_NEGATIVE;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// invalid code</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (b) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:</div>
<div class="line">      result.group = SYNTAX;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>:</div>
<div class="line">      result.group = INFORMATION;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>:</div>
<div class="line">      result.group = CONNECTIONS;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>:</div>
<div class="line">      result.group = AUTHENTICATION;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>:</div>
<div class="line">      result.group = UNSPECIFIED;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div>
<div class="line">      result.group = FILESYSTEM;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// invalid code</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((c &lt; <span class="charliteral">&#39;0&#39;</span>) || (c &gt; <span class="charliteral">&#39;9&#39;</span>)) {</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// invalid code</span></div>
<div class="line">    }</div>
<div class="line">    result.minor = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<span class="charliteral">&#39;c&#39;</span>-<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"> </div>
<div class="line">    result.code = (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(a-<span class="charliteral">&#39;0&#39;</span>) * 10 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(b-<span class="charliteral">&#39;0&#39;</span>)) * 10 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(c-<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line">    result.valid = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> getResponse() {</div>
<div class="line">    <a name="_a7"></a><a class="code" href="class_format_input_stream.html">FormatInputStream</a> instream(controlConnection);</div>
<div class="line"> </div>
<div class="line">    replyCode.valid = <span class="keyword">false</span>; <span class="comment">// invalidate</span></div>
<div class="line">    <span class="keywordtype">bool</span> multipleLines = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">int</span> terminationCode = -1; <span class="comment">// invalidate</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!instream.wait(1000000)) { <span class="comment">// wait for input</span></div>
<div class="line">      <span class="comment">// throw Timeout(&quot;FTP connection timed out.&quot;);</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) { <span class="comment">// read response</span></div>
<div class="line">      <a class="code" href="class_string.html">String</a> line(256);</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">while</span> (<span class="keyword">true</span>) { <span class="comment">// read line</span></div>
<div class="line">        <span class="keywordtype">char</span> ch = 0;</div>
<div class="line">        instream &gt;&gt; ch;</div>
<div class="line">        bassert(</div>
<div class="line">          <a name="a8"></a><a class="code" href="class_char_traits.html#a8ee60714fc024775be5568d3756f8b89">String::Traits::isASCII</a>(ch),</div>
<div class="line">          FTPException(<span class="stringliteral">&quot;Reply contains invalid character.&quot;</span>)</div>
<div class="line">        );</div>
<div class="line">        <span class="comment">// read until new line &quot;\n&quot; and remove &quot;\r&quot; and other annoying chars</span></div>
<div class="line">        <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line">          <span class="keywordflow">break</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;\r&#39;</span>) {</div>
<div class="line">          <span class="comment">// next must be &#39;\n&#39;?</span></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          line.append(ch);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> (verbosity &gt;= ALL) {</div>
<div class="line">        fout &lt;&lt; <span class="stringliteral">&quot;&gt;&gt; &quot;</span> &lt;&lt; line &lt;&lt; ENDL;</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      ReplyCode replyCode;</div>
<div class="line">      <span class="keywordflow">if</span> ((line.getLength() &gt;= 4) &amp;&amp; translateReplyCode(line[0], line[1], line[2], replyCode)) {</div>
<div class="line">        <span class="keywordflow">if</span> (line[3] == <span class="charliteral">&#39;-&#39;</span>) { <span class="comment">// first line</span></div>
<div class="line">          <span class="keywordflow">if</span> (!multipleLines) { <span class="comment">// only accept the first code</span></div>
<div class="line">            terminationCode = replyCode.code;</div>
<div class="line">            multipleLines = <span class="keyword">true</span>;</div>
<div class="line">          }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line[3] == <span class="charliteral">&#39; &#39;</span>) { <span class="comment">// last line</span></div>
<div class="line">          <span class="keywordflow">if</span> ((verbosity &gt;= SHORT) &amp;&amp; (verbosity &lt; ALL)) {</div>
<div class="line">            fout &lt;&lt; <span class="stringliteral">&quot;&gt;&gt; &quot;</span> &lt;&lt; line &lt;&lt; ENDL;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (!multipleLines || (multipleLines &amp;&amp; (replyCode.code == terminationCode))) {</div>
<div class="line">            response = line;</div>
<div class="line">            this-&gt;replyCode = replyCode;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!multipleLines) {</div>
<div class="line">        _throw FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    responsePending = <span class="keyword">false</span>;</div>
<div class="line">    bassert(replyCode.valid, FTPException(<span class="stringliteral">&quot;Failed to get reply.&quot;</span>));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> requestPassword(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; password) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_EXTENDED) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Sending command &#39;&quot;</span> &lt;&lt; CMD_PASSWORD</div>
<div class="line">           &lt;&lt; <span class="stringliteral">&quot;&#39; with value &#39;&quot;</span> &lt;&lt; password &lt;&lt; <span class="charliteral">&#39;\&#39;&#39;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    responsePending = <span class="keyword">true</span>;</div>
<div class="line">    <a name="_a9"></a><a class="code" href="class_format_output_stream.html">FormatOutputStream</a> outstream(controlConnection);</div>
<div class="line">    outstream &lt;&lt; CMD_PASSWORD &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; password &lt;&lt; <span class="stringliteral">&quot;\r\n&quot;</span> &lt;&lt; FLUSH;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> request(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; command) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_EXTENDED) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Sending command &#39;&quot;</span> &lt;&lt; command &lt;&lt; <span class="stringliteral">&quot;&#39; with no value&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    responsePending = <span class="keyword">true</span>;</div>
<div class="line">    <a class="code" href="class_format_output_stream.html">FormatOutputStream</a> outstream(controlConnection);</div>
<div class="line">    outstream &lt;&lt; command &lt;&lt; <span class="stringliteral">&quot;\r\n&quot;</span> &lt;&lt; FLUSH;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> request(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; command, <span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; value) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_EXTENDED) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Sending command &#39;&quot;</span> &lt;&lt; command &lt;&lt; <span class="stringliteral">&quot;&#39; with value &#39;&quot;</span> &lt;&lt; value &lt;&lt; <span class="charliteral">&#39;\&#39;&#39;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    responsePending = <span class="keyword">true</span>;</div>
<div class="line">    <a class="code" href="class_format_output_stream.html">FormatOutputStream</a> outstream(controlConnection);</div>
<div class="line">    outstream &lt;&lt; command &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; value &lt;&lt; <span class="stringliteral">&quot;\r\n&quot;</span> &lt;&lt; FLUSH;</div>
<div class="line">  }</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">bool</span> isValidString(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; str) {</div>
<div class="line">    <span class="keywordflow">if</span> (str.<a name="a10"></a><a class="code" href="class_string.html#ab31a36bda8c789ba3c0ed37bb16c978c">isEmpty</a>()) {</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">const</span> String::ReadIterator end = str.<a name="a11"></a><a class="code" href="class_string.html#a329ec306ac33605383654cd9c1040709">getEndReadIterator</a>();</div>
<div class="line">    <span class="keywordflow">for</span> (String::ReadIterator i = str.<a name="a12"></a><a class="code" href="class_string.html#a304007fdfcd2acdae2f0b56217ae920c">getBeginReadIterator</a>(); i &lt; end; ++i) {</div>
<div class="line">      <span class="keywordflow">if</span> (!<a class="code" href="class_char_traits.html#a8ee60714fc024775be5568d3756f8b89">String::Traits::isASCII</a>(*i) || (*i == <span class="charliteral">&#39;\n&#39;</span>) || (*i == <span class="charliteral">&#39;\r&#39;</span>)) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">bool</span> isValidPrintableString(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; str) {</div>
<div class="line">    <span class="keywordflow">if</span> (str.<a class="code" href="class_string.html#ab31a36bda8c789ba3c0ed37bb16c978c">isEmpty</a>()) {</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">const</span> String::ReadIterator end = str.<a class="code" href="class_string.html#a329ec306ac33605383654cd9c1040709">getEndReadIterator</a>();</div>
<div class="line">    <span class="keywordflow">for</span> (String::ReadIterator i = str.<a class="code" href="class_string.html#a304007fdfcd2acdae2f0b56217ae920c">getBeginReadIterator</a>(); i &lt; end; ++i) {</div>
<div class="line">      <span class="keywordflow">if</span> ((*i &lt; 33) || (*i &gt; 126)) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  FileTransferProtocolClient(<a class="code" href="class_inet_end_point.html">InetEndPoint</a> ep, Verbosity v = DEBUG_EXTENDED)</div>
<div class="line">    : endPoint(ep),</div>
<div class="line">      verbosity(v),</div>
<div class="line">      retryDelay(DEFAULT_RETRY_DELAY),</div>
<div class="line">      retryAttempts(DEFAULT_RETRY_ATTEMPTS) {</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getRetryDelay()<span class="keyword"> const </span>{</div>
<div class="line">    <span class="keywordflow">return</span> retryDelay;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> setRetryDelay(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value) {</div>
<div class="line">    retryDelay = value;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getRetryAttempts()<span class="keyword"> const </span>{</div>
<div class="line">    <span class="keywordflow">return</span> retryAttempts;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> setRetryAttempts(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value) {</div>
<div class="line">    retryAttempts = value;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> connect() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Establishing control connection to: &quot;</span></div>
<div class="line">           &lt;&lt; endPoint &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    controlConnection.<a name="a13"></a><a class="code" href="class_stream_socket.html#a6e0aea719fe3e57d2ef4629d5a0c1fce">connect</a>(endPoint.<a name="a14"></a><a class="code" href="class_inet_end_point.html#aa19ef1f6be976a00e13b544d89c3ba6a">getAddress</a>(), endPoint.<a name="a15"></a><a class="code" href="class_inet_end_point.html#aa99ae24dc2401d68c213a83e9d597556">getPort</a>());</div>
<div class="line">    controlConnection.<a name="a16"></a><a class="code" href="class_stream_socket.html#a01819dfd9af1e02e66251e0b3a846b9c">getName</a>();</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> sendUser(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; username) {</div>
<div class="line">    bassert(isValidString(username), <a name="_a17"></a><a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid FTP string.&quot;</span>));</div>
<div class="line">    request(CMD_USER, username);</div>
<div class="line">    getResponse();</div>
<div class="line">    <span class="keywordflow">return</span> replyCode.reply;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> sendPassword(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; password) {</div>
<div class="line">    bassert(isValidString(password), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid FTP string.&quot;</span>));</div>
<div class="line">    requestPassword(password);</div>
<div class="line">    getResponse();</div>
<div class="line">    <span class="keywordflow">return</span> replyCode.reply;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> sendAccount(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; account) {</div>
<div class="line">    bassert(isValidString(account), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid FTP string.&quot;</span>));</div>
<div class="line">    request(CMD_ACCOUNT, account);</div>
<div class="line">    getResponse();</div>
<div class="line">    <span class="keywordflow">return</span> replyCode.reply;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> sendReinitialize() {</div>
<div class="line">    request(CMD_REINITIALIZE);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> sendHelp() {</div>
<div class="line">    request(CMD_HELP);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> sendNoOperation() {</div>
<div class="line">    request(CMD_NOOP);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> getSystemType() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Getting system type...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_SYSTEM);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> getStatus() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Getting status...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_STATUS);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> setType(Representation representation) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Setting type...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">switch</span> (representation) {</div>
<div class="line">    <span class="keywordflow">case</span> ASCII:</div>
<div class="line">      request(CMD_REPRESENTATION, <span class="stringliteral">&quot;A&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> BINARY:</div>
<div class="line">      request(CMD_REPRESENTATION, <span class="stringliteral">&quot;I&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> EBCDIC:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> LOCALSIZE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> setStructure(Structure structure) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Setting file structure...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">switch</span> (structure) {</div>
<div class="line">    <span class="keywordflow">case</span> FILE:</div>
<div class="line">      request(CMD_FILE_STRUCTURE, <span class="stringliteral">&quot;F&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> RECORD:</div>
<div class="line">      request(CMD_FILE_STRUCTURE, <span class="stringliteral">&quot;R&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> PAGE:</div>
<div class="line">      request(CMD_FILE_STRUCTURE, <span class="stringliteral">&quot;P&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> setMode(Mode mode) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Setting mode...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">switch</span> (mode) {</div>
<div class="line">    <span class="keywordflow">case</span> STREAM:</div>
<div class="line">      request(CMD_TRANSFER_MODE, <span class="stringliteral">&quot;S&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> BLOCK:</div>
<div class="line">      request(CMD_TRANSFER_MODE, <span class="stringliteral">&quot;B&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> COMPRESSED:</div>
<div class="line">      request(CMD_TRANSFER_MODE, <span class="stringliteral">&quot;C&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> getList() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: List...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_LIST);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> readDirectoryList() {</div>
<div class="line">    <a name="_a18"></a><a class="code" href="class_allocator.html">Allocator&lt;uint8&gt;</a> buffer(4096);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) { <span class="comment">// read line until response</span></div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result =</div>
<div class="line">        dataConnection.<a name="a19"></a><a class="code" href="class_stream_socket.html#a7de21334ca8a2b37708e0f712426da5a">read</a>(buffer.getElements(), buffer.getSize(), <span class="keyword">true</span>);</div>
<div class="line">      <span class="keywordflow">if</span> (result == 0) {</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      <span class="keyword">const</span> <span class="keywordtype">char</span>* i = Cast::pointer&lt;const char*&gt;(buffer.getElements());</div>
<div class="line">      <span class="keyword">const</span> <span class="keywordtype">char</span>* end = i + result;</div>
<div class="line">      <span class="keywordflow">while</span> (i &lt; end) { <span class="comment">// read all</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span>* p = i;</div>
<div class="line">        <span class="keywordflow">while</span> ((i &lt; end) &amp;&amp; (*i != <span class="charliteral">&#39;\n&#39;</span>) &amp;&amp; (*i != <span class="charliteral">&#39;\r&#39;</span>)) {</div>
<div class="line">          ++i;</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="class_string.html">String</a> line(p, i - p);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// skip new line</span></div>
<div class="line">        <span class="keywordflow">if</span> (*i == <span class="charliteral">&#39;\r&#39;</span>) {</div>
<div class="line">          ++i;</div>
<div class="line">          <span class="keywordflow">if</span> (*i == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line">            ++i;</div>
<div class="line">          }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*i == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line">          ++i;</div>
<div class="line">          <span class="keywordflow">if</span> (*i == <span class="charliteral">&#39;\r&#39;</span>) {</div>
<div class="line">            ++i;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">          fout &lt;&lt; <span class="stringliteral">&quot;-&gt; &quot;</span> &lt;&lt; line &lt;&lt; ENDL;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> readData(<span class="keywordtype">long</span> <span class="keywordtype">long</span> sizeOfFile) {</div>
<div class="line">    <a class="code" href="class_allocator.html">Allocator&lt;uint8&gt;</a> buffer(4096 * 16);</div>
<div class="line">    <a name="_a20"></a><a class="code" href="class_file.html">File</a> file(<span class="stringliteral">&quot;ftpoutput&quot;</span>, <a name="a21"></a><a class="code" href="class_file.html#adb1db6815e6eeb9b39c76da4a541ae18a20233714769e48aa46a386c3fd8e84d7">File::WRITE</a>, <a name="a22"></a><a class="code" href="class_file.html#a335979c8b00259c29ac1a2784cb4dfd4ae98c4bc1eaf89a65baa406458c743382">File::CREATE</a> | <a name="a23"></a><a class="code" href="class_file.html#a335979c8b00259c29ac1a2784cb4dfd4a646ec9705a761ff7e96b6c4f78720ba5">File::TRUNCATE</a>);</div>
<div class="line"> </div>
<div class="line">    <a name="_a24"></a><a class="code" href="class_timer.html">Timer</a> timer;</div>
<div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">long</span> bytesRead = 0;</div>
<div class="line">    <span class="keywordflow">while</span> (bytesRead &lt; sizeOfFile) {</div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bytesToRead =</div>
<div class="line">        minimum&lt;long long&gt;(buffer.getSize(), sizeOfFile - bytesRead);</div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result =</div>
<div class="line">        dataConnection.<a class="code" href="class_stream_socket.html#a7de21334ca8a2b37708e0f712426da5a">read</a>(buffer.getElements(), bytesToRead);</div>
<div class="line">      bytesRead += result;</div>
<div class="line"> </div>
<div class="line">      file.write(buffer.getElements(), result);</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> (verbosity &gt;= SHORT) {</div>
<div class="line">        fout &lt;&lt; <span class="stringliteral">&quot;bytes read=&quot;</span> &lt;&lt; bytesRead &lt;&lt; <span class="charliteral">&#39; &#39;</span></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;completed=&quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(bytesRead)/sizeOfFile*100 &lt;&lt; <span class="charliteral">&#39;%&#39;</span> &lt;&lt; <span class="charliteral">&#39; &#39;</span></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;time=&quot;</span> &lt;&lt; timer.<a name="a25"></a><a class="code" href="class_timer.html#ab82c0b645c7b797b2a970812dc3617e3">getLiveMicroseconds</a>()/1000000. &lt;&lt; <span class="charliteral">&#39; &#39;</span></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;rate=&quot;</span> &lt;&lt; (1000000./1024. * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(bytesRead)/timer.<a class="code" href="class_timer.html#ab82c0b645c7b797b2a970812dc3617e3">getLiveMicroseconds</a>()) &lt;&lt; <span class="stringliteral">&quot;kbs\r&quot;</span> &lt;&lt; FLUSH;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    fout &lt;&lt; ENDL;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> restart(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; marker) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Restarting...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    bassert(isValidPrintableString(marker), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid marker.&quot;</span>));</div>
<div class="line">    request(CMD_RESTART, marker);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// File commands</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> renameFile(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; from, <span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; to) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Renaming file system object...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    bassert(isValidString(from) &amp;&amp; isValidString(to), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid path.&quot;</span>));</div>
<div class="line">    request(CMD_RENAME_FROM, from);</div>
<div class="line">    request(CMD_RENAME_TO, to);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> deleteFile(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; path) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Deleting file system object...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    bassert(isValidString(path), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid path.&quot;</span>));</div>
<div class="line">    request(CMD_DELETE, path);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Directory commands</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> getCurrentDirectory() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Getting current directory...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_PWD);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> changeDirectory(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; path) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Changing working directory...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (path == <span class="stringliteral">&quot;..&quot;</span>) {</div>
<div class="line">      request(CMD_CDUP);</div>
<div class="line">      getResponse();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      bassert(isValidString(path), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid path.&quot;</span>));</div>
<div class="line">      request(CMD_CWD, path);</div>
<div class="line">      getResponse();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> makeDirectory(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; path) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Creating new directory...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    bassert(isValidString(path), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid path.&quot;</span>));</div>
<div class="line">    request(CMD_MAKE_DIRECTORY);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> removeDirectory(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; path)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Removing directory...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    bassert(isValidString(path), <a class="code" href="class_invalid_format.html">InvalidFormat</a>(<span class="stringliteral">&quot;Invalid path.&quot;</span>));</div>
<div class="line">    request(CMD_REMOVE_DIRECTORY);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="class_string.html">String</a> clipPassiveResponse(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; response, <span class="keywordtype">int</span>&amp; index)</div>
<div class="line">  {</div>
<div class="line">    <a class="code" href="class_string.html">String</a> result(3);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> count = 3;</div>
<div class="line">      count &amp;&amp; (index &lt; static_cast&lt;int&gt;(response.<a name="a26"></a><a class="code" href="class_string.html#a0f03b86bfcf56cd0da709f95e79b9c9b">getLength</a>())) &amp;&amp;</div>
<div class="line">        (response[index] &gt;= <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (response[index] &lt;= <span class="charliteral">&#39;9&#39;</span>); --count) {</div>
<div class="line">      result += response[index++];</div>
<div class="line">    }</div>
<div class="line">    bassert(!result.isEmpty(), FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>));</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">  }</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> login(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; username, <span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; password) {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Sending user and password...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">switch</span> (sendUser(username)) {</div>
<div class="line">    <span class="keywordflow">case</span> POSITIVE: <span class="comment">// not expected but ok</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> POSITIVE_INTERMEDIATE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      _throw FTPException(<span class="stringliteral">&quot;Unable to login.&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">switch</span> (sendPassword(password)) {</div>
<div class="line">    <span class="keywordflow">case</span> POSITIVE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      _throw FTPException(<span class="stringliteral">&quot;Unable to login.&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> logout()</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Requesting logout...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_LOGOUT);</div>
<div class="line">    getResponse();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> getDirectoryList()</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Retrieving directory list...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_LIST);</div>
<div class="line">    getResponse(); <span class="comment">// wait for completed</span></div>
<div class="line">    readDirectoryList();</div>
<div class="line">    getResponse(); <span class="comment">// wait for completed</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> retrieveFile(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; filename)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Retrieving file...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_RETRIEVE, filename);</div>
<div class="line">    getResponse();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> i = response.<a name="a27"></a><a class="code" href="class_string.html#a956785ad5fbd5c770fa488890a271181">indexOf</a>(<span class="stringliteral">&quot; byte&quot;</span>, 4);</div>
<div class="line">    bassert(i &gt;= 0, FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>));</div>
<div class="line">    --i; <span class="comment">// possible last digit</span></div>
<div class="line">    bassert(</div>
<div class="line">      (response[i] &gt;= <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (response[i] &lt;= <span class="charliteral">&#39;9&#39;</span>),</div>
<div class="line">      FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>)</div>
<div class="line">    );</div>
<div class="line">    <span class="keywordflow">while</span> ((response[i] &gt;= <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (response[i] &lt;= <span class="charliteral">&#39;9&#39;</span>)) { <span class="comment">// find first digit</span></div>
<div class="line">      --i;</div>
<div class="line">    }</div>
<div class="line">    ++i; <span class="comment">// back to first digit</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">long</span> numberOfBytes = 0;</div>
<div class="line">    <span class="keywordflow">while</span> ((response[i] &gt;= <span class="charliteral">&#39;0&#39;</span>) &amp;&amp; (response[i] &lt;= <span class="charliteral">&#39;9&#39;</span>)) {</div>
<div class="line">      numberOfBytes = (response[i++] - <span class="charliteral">&#39;0&#39;</span>) + 10 * numberOfBytes; <span class="comment">// TAG: use LongInteger to handle overflow</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    request(CMD_LIST);</div>
<div class="line">    readData(numberOfBytes);</div>
<div class="line">    getResponse(); <span class="comment">// wait for completed</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"><span class="comment">//const Literal CMD_RETRIEVE = MESSAGE(&quot;RETR&quot;); // retrieve file from server</span></div>
<div class="line"><span class="comment">//const Literal CMD_STORE = MESSAGE(&quot;STOR&quot;); // store file on server</span></div>
<div class="line"><span class="comment">//const Literal CMD_STORE_UNIQUE = MESSAGE(&quot;STOU&quot;); // store unique file on server</span></div>
<div class="line"><span class="comment">//const Literal CMD_APPEND = MESSAGE(&quot;APPE&quot;); // append data to file on server</span></div>
<div class="line"><span class="comment">//const Literal CMD_ALLOCATE = MESSAGE(&quot;ALLO&quot;); // allocate storage for specified number of bytes</span></div>
<div class="line"><span class="comment">//const Literal CMD_NAME_LIST = MESSAGE(&quot;NLST&quot;); // request name list</span></div>
<div class="line"><span class="comment">//const Literal CMD_SITE = MESSAGE(&quot;SITE&quot;); // site specific</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> abort() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Aborting...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_ABORT);</div>
<div class="line">    getResponse(); <span class="comment">// wait for completed</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> requestActiveTransfer() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Requesting active transfer mode...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    serverDataConnection = <a class="code" href="class_server_socket.html">ServerSocket</a>(controlConnection.<a name="a28"></a><a class="code" href="class_stream_socket.html#a9640edd848c5bac3517d23bafad06f23">getLocalAddress</a>(), 0, 1); <span class="comment">// address must be IPv4</span></div>
<div class="line">    serverDataConnection.<a name="a29"></a><a class="code" href="class_server_socket.html#a1d693235f0e95e16c4df28775e8fdba3">getName</a>();</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* binaryAddress = serverDataConnection.<a name="a30"></a><a class="code" href="class_server_socket.html#a87de644b3b1194bb7a8faa6e99e46673">getLocalAddress</a>().<a name="a31"></a><a class="code" href="class_inet_address.html#a0637f5d2643bb73099679339eb1e97c3">getAddress</a>(); <span class="comment">// network byte order!</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> port = serverDataConnection.<a name="a32"></a><a class="code" href="class_server_socket.html#aa245da9f861f99bd78d1fef073e4124d">getLocalPort</a>();</div>
<div class="line">    <a name="_a33"></a><a class="code" href="class_string_output_stream.html">StringOutputStream</a> endPoint;</div>
<div class="line">    endPoint &lt;&lt; static_cast&lt;unsigned int&gt;(binaryAddress[0]) &lt;&lt; <span class="charliteral">&#39;,&#39;</span></div>
<div class="line">             &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(binaryAddress[1]) &lt;&lt; <span class="charliteral">&#39;,&#39;</span></div>
<div class="line">             &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(binaryAddress[2]) &lt;&lt; <span class="charliteral">&#39;,&#39;</span></div>
<div class="line">             &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(binaryAddress[3]) &lt;&lt; <span class="charliteral">&#39;,&#39;</span></div>
<div class="line">             &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(port &gt;&gt; 8) &lt;&lt; <span class="charliteral">&#39;,&#39;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(port &amp; 0xff) &lt;&lt; FLUSH;</div>
<div class="line">    request(CMD_DATA_PORT, endPoint.<a name="a34"></a><a class="code" href="class_string_output_stream.html#a5961bae1abf412a65744385e536cc029">getString</a>());</div>
<div class="line">    getResponse();</div>
<div class="line"> </div>
<div class="line">    request(CMD_LIST);</div>
<div class="line">    dataConnection = serverDataConnection.<a name="a35"></a><a class="code" href="class_server_socket.html#adfa49df6e01ffee86c9850982de7131c">accept</a>();</div>
<div class="line">    fout &lt;&lt; <span class="stringliteral">&quot;Incoming connection from: &quot;</span> &lt;&lt; dataConnection.<a name="a36"></a><a class="code" href="class_stream_socket.html#a7eabc256fb774e12db56b414ac05c52e">getAddress</a>() &lt;&lt; ENDL;</div>
<div class="line">    getResponse(); <span class="comment">// wait for completed</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> waitForConnection() {</div>
<div class="line">    dataConnection = serverDataConnection.<a class="code" href="class_server_socket.html#adfa49df6e01ffee86c9850982de7131c">accept</a>();</div>
<div class="line">    fout &lt;&lt; <span class="stringliteral">&quot;Incoming connection from: &quot;</span> &lt;&lt; dataConnection.<a class="code" href="class_stream_socket.html#a7eabc256fb774e12db56b414ac05c52e">getAddress</a>() &lt;&lt; ENDL;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> requestPassiveTransfer() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Requesting passive transfer mode...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    request(CMD_PASSIVE);</div>
<div class="line">    getResponse();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (i = 4; (i &lt; static_cast&lt;int&gt;(response.<a class="code" href="class_string.html#a0f03b86bfcf56cd0da709f95e79b9c9b">getLength</a>())) &amp;&amp; ((response[i] &lt; <span class="charliteral">&#39;0&#39;</span>) || (response[i] &gt; <span class="charliteral">&#39;9&#39;</span>)); ++i); <span class="comment">// find first digit of addr</span></div>
<div class="line">    bassert(i &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(response.<a class="code" href="class_string.html#a0f03b86bfcf56cd0da709f95e79b9c9b">getLength</a>()), FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="class_string.html">String</a> address(15);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> number = 0; number &lt; 4; ++number) { <span class="comment">// read address</span></div>
<div class="line">      <a class="code" href="class_string.html">String</a> result = clipPassiveResponse(response, i);</div>
<div class="line">      bassert(response[i++] == <span class="charliteral">&#39;,&#39;</span>, FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>));  <span class="comment">// skip &#39;,&#39;</span></div>
<div class="line">      address += result;</div>
<div class="line">      <span class="keywordflow">if</span> (number &lt; 3) {</div>
<div class="line">        address += <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="class_string.html">String</a> portHigh = clipPassiveResponse(response, i);</div>
<div class="line">    bassert(response[i++] == <span class="charliteral">&#39;,&#39;</span>, FTPException(<span class="stringliteral">&quot;Invalid reply.&quot;</span>));  <span class="comment">// skip &#39;,&#39;</span></div>
<div class="line">    <a class="code" href="class_string.html">String</a> portLow = clipPassiveResponse(response, i);</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> port = <a name="_a37"></a><a class="code" href="class_unsigned_integer.html">UnsignedInteger</a>(portHigh).<a name="a38"></a><a class="code" href="class_unsigned_integer.html#a8c58df7eb879fb64ad4ab726db3fdfbb">getValue</a>() * 256 + <a class="code" href="class_unsigned_integer.html">UnsignedInteger</a>(portLow).<a class="code" href="class_unsigned_integer.html#a8c58df7eb879fb64ad4ab726db3fdfbb">getValue</a>(); <span class="comment">// TAG: make UnsignedInteger class and use this here</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Establishing data connection to: &quot;</span></div>
<div class="line">           &lt;&lt; <a class="code" href="class_inet_end_point.html">InetEndPoint</a>(address, port) &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="class_inet_end_point.html">InetEndPoint</a> endPoint(address, port);</div>
<div class="line">    dataConnection = <a class="code" href="class_stream_socket.html">StreamSocket</a>();</div>
<div class="line">    dataConnection.<a class="code" href="class_stream_socket.html#a6e0aea719fe3e57d2ef4629d5a0c1fce">connect</a>(endPoint.getAddress(), endPoint.getPort());</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  ~FileTransferProtocolClient() {</div>
<div class="line">    <span class="keywordflow">if</span> (verbosity &gt;= DEBUG_NORMAL) {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;DEBUG: Closing sockets...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    }</div>
<div class="line">    dataConnection.<a name="a39"></a><a class="code" href="class_stream_socket.html#af0bbecc96f41e4dd13fcb993647350bf">close</a>();</div>
<div class="line">    controlConnection.<a class="code" href="class_stream_socket.html#af0bbecc96f41e4dd13fcb993647350bf">close</a>();</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MyThread : <span class="keyword">public</span> <a name="_a40"></a><a class="code" href="class_runnable.html">Runnable</a> {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"> </div>
<div class="line">  FileTransferProtocolClient&amp; client;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">  MyThread(FileTransferProtocolClient&amp; _client) : client(_client) {</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> run() {</div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">      client.waitForConnection();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ftpclient(<span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; resource, <span class="keyword">const</span> <a class="code" href="class_string.html">String</a>&amp; file) {</div>
<div class="line">  <a name="_a41"></a><a class="code" href="class_url.html">Url</a> url(resource);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (url.getScheme().isEmpty()) {</div>
<div class="line">    url.setScheme(<span class="stringliteral">&quot;ftp&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (url.getUser().isEmpty()) {</div>
<div class="line">    url.setUser(<span class="stringliteral">&quot;anonymous&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (url.getPassword().isEmpty()) {</div>
<div class="line">    url.setPassword(<span class="stringliteral">&quot;just@testing.my.app&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (url.getPort().isEmpty()) {</div>
<div class="line">    url.setPort(<span class="stringliteral">&quot;21&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  fout &lt;&lt; <span class="stringliteral">&quot;Individual parts of the specified url:&quot;</span> &lt;&lt; EOL</div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;  scheme: &quot;</span> &lt;&lt; url.getScheme() &lt;&lt; EOL</div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;  user: &quot;</span> &lt;&lt; url.getUser() &lt;&lt; EOL</div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;  password: &quot;</span> &lt;&lt; url.getPassword() &lt;&lt; EOL</div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;  host: &quot;</span> &lt;&lt; url.getHost() &lt;&lt; EOL</div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;  port: &quot;</span> &lt;&lt; url.getPort() &lt;&lt; EOL</div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;  path: &quot;</span> &lt;&lt; url.getPath() &lt;&lt; ENDL;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (url.getScheme() != <span class="stringliteral">&quot;ftp&quot;</span>) {</div>
<div class="line">    fout &lt;&lt; <span class="stringliteral">&quot;Invalid url&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <a name="_a42"></a><a class="code" href="class_inet_address.html">InetAddress</a> address; <span class="comment">// the address of the remote host</span></div>
<div class="line">  {</div>
<div class="line">    fout &lt;&lt; <span class="stringliteral">&quot;Server addresses:&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">    <a name="_a43"></a><a class="code" href="class_list.html">List&lt;InetAddress&gt;</a> addresses = <a name="a44"></a><a class="code" href="class_inet_address.html#a252f40425847bf9d1fb8d24ab5bfa3b8">InetAddress::getAddressesByName</a>(url.getHost());</div>
<div class="line">    <a name="_a45"></a><a class="code" href="class_double_linked_node_read_enumerator.html">List&lt;InetAddress&gt;::ReadEnumerator</a> enu = addresses.<a name="a46"></a><a class="code" href="class_list.html#a696406735a0196e8e0d090e2d1d72fc6">getReadEnumerator</a>();</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0;</div>
<div class="line">    <span class="keywordflow">while</span> (enu.<a name="a47"></a><a class="code" href="class_double_linked_node_read_enumerator.html#af224dec383bf510a7074b8572c3add78">hasNext</a>()) {</div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="class_inet_address.html">InetAddress</a>&amp; temp = enu.<a name="a48"></a><a class="code" href="class_double_linked_node_read_enumerator.html#a7394eb7fd5e6776e56931ada238bf480">next</a>();</div>
<div class="line">      <span class="keywordflow">if</span> (index == 0) { <span class="comment">// use the first address</span></div>
<div class="line">        address = temp;</div>
<div class="line">        fout &lt;&lt; <span class="stringliteral">&quot;  address &quot;</span> &lt;&lt; index++ &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; temp &lt;&lt; <span class="stringliteral">&quot; (USING THIS)&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        fout &lt;&lt; <span class="stringliteral">&quot;  address &quot;</span> &lt;&lt; index++ &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; temp &lt;&lt; ENDL;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="class_inet_end_point.html">InetEndPoint</a> endPoint(address, url.getPort());</div>
<div class="line"> </div>
<div class="line">  FileTransferProtocolClient client(endPoint);</div>
<div class="line">  client.connect();</div>
<div class="line">  client.login(url.getUser(), url.getPassword());</div>
<div class="line">  <span class="keywordflow">if</span> (url.getPath().endsWith(<span class="stringliteral">&quot;/&quot;</span>)) {</div>
<div class="line">    client.changeDirectory(url.getPath());</div>
<div class="line">  }</div>
<div class="line">  client.getSystemType();</div>
<div class="line">  client.getCurrentDirectory();</div>
<div class="line">  client.setType(FileTransferProtocolClient::BINARY);</div>
<div class="line">  client.setMode(FileTransferProtocolClient::STREAM);</div>
<div class="line">  client.requestPassiveTransfer();</div>
<div class="line">  client.getDirectoryList();</div>
<div class="line">  client.makeDirectory(<span class="stringliteral">&quot;fonseca&quot;</span>);</div>
<div class="line"><span class="comment">//  client.requestActiveTransfer();</span></div>
<div class="line"><span class="comment">//  client.getDirectoryList();</span></div>
<div class="line"><span class="comment">//  client.abort();</span></div>
<div class="line">  <span class="keywordflow">if</span> (url.getPath().isProper()) {</div>
<div class="line">    client.setMode(FileTransferProtocolClient::BLOCK);</div>
<div class="line">    client.requestPassiveTransfer();</div>
<div class="line">    client.retrieveFile(url.getPath());</div>
<div class="line">  }</div>
<div class="line">  client.logout();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>FTPApplication : <span class="keyword">public</span> <a name="_a49"></a><a class="code" href="class_application.html">Application</a> {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> MAJOR_VERSION = 1;</div>
<div class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> MINOR_VERSION = 0;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  </div>
<div class="line">  FTPApplication()</div>
<div class="line">    : <a class="code" href="class_application.html">Application</a>(<span class="stringliteral">&quot;ftp&quot;</span>)</div>
<div class="line">  {</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> main() {</div>
<div class="line">    fout &lt;&lt; getFormalName() &lt;&lt; <span class="stringliteral">&quot; version &quot;</span></div>
<div class="line">         &lt;&lt; MAJOR_VERSION &lt;&lt; <span class="charliteral">&#39;.&#39;</span> &lt;&lt; MINOR_VERSION &lt;&lt; EOL</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;The Base Framework (Test Suite)&quot;</span> &lt;&lt; EOL</div>
<div class="line">         &lt;&lt; ENDL;</div>
<div class="line">    </div>
<div class="line">    <a name="_a50"></a><a class="code" href="class_array.html">Array&lt;String&gt;</a> arguments = getArguments();</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="class_string.html">String</a> url = <span class="stringliteral">&quot;ftp.sunsite.auc.dk&quot;</span>; <span class="comment">// default url</span></div>
<div class="line">    <a class="code" href="class_string.html">String</a> file = <span class="stringliteral">&quot;welcome.msg&quot;</span>; <span class="comment">// default file</span></div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span> (arguments.<a name="a51"></a><a class="code" href="class_array.html#a137f2cae7d1ade1316b2a0d10ffaccde">getSize</a>()) {</div>
<div class="line">    <span class="keywordflow">case</span> 0:</div>
<div class="line">      <span class="comment">// use defaults</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> 1:</div>
<div class="line">      url = arguments[0]; <span class="comment">// the address</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> 2:</div>
<div class="line">      url = arguments[0]; <span class="comment">// the address</span></div>
<div class="line">      file = arguments[1]; <span class="comment">// the service</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; getFormalName() &lt;&lt; <span class="stringliteral">&quot; [url] [output]&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">      <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">      fout &lt;&lt; <span class="stringliteral">&quot;Testing File Transfer Protocol (FTP) class...&quot;</span> &lt;&lt; ENDL;</div>
<div class="line">      ftpclient(url, file);</div>
<div class="line">    } <span class="keywordflow">catch</span> (<a name="_a52"></a><a class="code" href="class_exception.html">Exception</a>&amp;) {</div>
<div class="line">      setExitCode(EXIT_CODE_ERROR);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">APPLICATION_STUB(FTPApplication);</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="aclass_string_html_a0f03b86bfcf56cd0da709f95e79b9c9b"><div class="ttname"><a href="class_string.html#a0f03b86bfcf56cd0da709f95e79b9c9b">String::getLength</a></div><div class="ttdeci">MemorySize getLength() const noexcept</div><div class="ttdef"><b>Definition:</b> String.h:467</div></div>
<div class="ttc" id="aclass_inet_end_point_html"><div class="ttname"><a href="class_inet_end_point.html">InetEndPoint</a></div><div class="ttdoc">Internet end point.</div><div class="ttdef"><b>Definition:</b> InetEndPoint.h:30</div></div>
<div class="ttc" id="aclass_i_o_exception_html"><div class="ttname"><a href="class_i_o_exception.html">IOException</a></div><div class="ttdoc">IO exception.</div><div class="ttdef"><b>Definition:</b> IOException.h:32</div></div>
<div class="ttc" id="aclass_stream_socket_html_a01819dfd9af1e02e66251e0b3a846b9c"><div class="ttname"><a href="class_stream_socket.html#a01819dfd9af1e02e66251e0b3a846b9c">StreamSocket::getName</a></div><div class="ttdeci">void getName()</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:147</div></div>
<div class="ttc" id="aclass_stream_socket_html_a7eabc256fb774e12db56b414ac05c52e"><div class="ttname"><a href="class_stream_socket.html#a7eabc256fb774e12db56b414ac05c52e">StreamSocket::getAddress</a></div><div class="ttdeci">const InetAddress &amp; getAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:155</div></div>
<div class="ttc" id="aclass_list_html_a696406735a0196e8e0d090e2d1d72fc6"><div class="ttname"><a href="class_list.html#a696406735a0196e8e0d090e2d1d72fc6">List::getReadEnumerator</a></div><div class="ttdeci">ReadEnumerator getReadEnumerator() const noexcept</div><div class="ttdef"><b>Definition:</b> List.h:618</div></div>
<div class="ttc" id="aclass_server_socket_html_aa245da9f861f99bd78d1fef073e4124d"><div class="ttname"><a href="class_server_socket.html#aa245da9f861f99bd78d1fef073e4124d">ServerSocket::getLocalPort</a></div><div class="ttdeci">unsigned short getLocalPort() const noexcept</div><div class="ttdef"><b>Definition:</b> ServerSocket.h:133</div></div>
<div class="ttc" id="aclass_stream_socket_html_af0bbecc96f41e4dd13fcb993647350bf"><div class="ttname"><a href="class_stream_socket.html#af0bbecc96f41e4dd13fcb993647350bf">StreamSocket::close</a></div><div class="ttdeci">void close()</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:116</div></div>
<div class="ttc" id="aclass_server_socket_html_adfa49df6e01ffee86c9850982de7131c"><div class="ttname"><a href="class_server_socket.html#adfa49df6e01ffee86c9850982de7131c">ServerSocket::accept</a></div><div class="ttdeci">StreamSocket accept()</div><div class="ttdef"><b>Definition:</b> ServerSocket.h:86</div></div>
<div class="ttc" id="aclass_runnable_html"><div class="ttname"><a href="class_runnable.html">Runnable</a></div><div class="ttdoc">Base class of active objects.</div><div class="ttdef"><b>Definition:</b> Runnable.h:32</div></div>
<div class="ttc" id="aclass_double_linked_node_read_enumerator_html"><div class="ttname"><a href="class_double_linked_node_read_enumerator.html">DoubleLinkedNodeReadEnumerator</a></div><div class="ttdoc">Non-modifying enumerator of DoubleLinkedNode.</div><div class="ttdef"><b>Definition:</b> DoubleLinkedNode.h:607</div></div>
<div class="ttc" id="aclass_stream_socket_html_a6e0aea719fe3e57d2ef4629d5a0c1fce"><div class="ttname"><a href="class_stream_socket.html#a6e0aea719fe3e57d2ef4629d5a0c1fce">StreamSocket::connect</a></div><div class="ttdeci">void connect(const InetAddress &amp;address, unsigned short port)</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:127</div></div>
<div class="ttc" id="aclass_allocator_html"><div class="ttname"><a href="class_allocator.html">Allocator&lt; uint8 &gt;</a></div></div>
<div class="ttc" id="aclass_inet_address_html_a252f40425847bf9d1fb8d24ab5bfa3b8"><div class="ttname"><a href="class_inet_address.html#a252f40425847bf9d1fb8d24ab5bfa3b8">InetAddress::getAddressesByName</a></div><div class="ttdeci">static List&lt; InetAddress &gt; getAddressesByName(const String &amp;name)</div></div>
<div class="ttc" id="aclass_format_output_stream_html"><div class="ttname"><a href="class_format_output_stream.html">FormatOutputStream</a></div><div class="ttdoc">Format output stream.</div><div class="ttdef"><b>Definition:</b> FormatOutputStream.h:105</div></div>
<div class="ttc" id="aclass_string_html_a329ec306ac33605383654cd9c1040709"><div class="ttname"><a href="class_string.html#a329ec306ac33605383654cd9c1040709">String::getEndReadIterator</a></div><div class="ttdeci">ReadIterator getEndReadIterator() const noexcept</div><div class="ttdef"><b>Definition:</b> String.h:562</div></div>
<div class="ttc" id="aclass_unsigned_integer_html_a8c58df7eb879fb64ad4ab726db3fdfbb"><div class="ttname"><a href="class_unsigned_integer.html#a8c58df7eb879fb64ad4ab726db3fdfbb">UnsignedInteger::getValue</a></div><div class="ttdeci">unsigned int getValue() const noexcept</div><div class="ttdef"><b>Definition:</b> UnsignedInteger.h:126</div></div>
<div class="ttc" id="aclass_literal_html"><div class="ttname"><a href="class_literal.html">Literal</a></div><div class="ttdoc">A string literal.</div><div class="ttdef"><b>Definition:</b> Literal.h:28</div></div>
<div class="ttc" id="aclass_inet_end_point_html_aa19ef1f6be976a00e13b544d89c3ba6a"><div class="ttname"><a href="class_inet_end_point.html#aa19ef1f6be976a00e13b544d89c3ba6a">InetEndPoint::getAddress</a></div><div class="ttdeci">const InetAddress &amp; getAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> InetEndPoint.h:119</div></div>
<div class="ttc" id="aclass_string_html_a304007fdfcd2acdae2f0b56217ae920c"><div class="ttname"><a href="class_string.html#a304007fdfcd2acdae2f0b56217ae920c">String::getBeginReadIterator</a></div><div class="ttdeci">ReadIterator getBeginReadIterator() const noexcept</div><div class="ttdef"><b>Definition:</b> String.h:554</div></div>
<div class="ttc" id="aclass_stream_socket_html"><div class="ttname"><a href="class_stream_socket.html">StreamSocket</a></div><div class="ttdoc">Stream socket.</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:33</div></div>
<div class="ttc" id="aclass_char_traits_html_a8ee60714fc024775be5568d3756f8b89"><div class="ttname"><a href="class_char_traits.html#a8ee60714fc024775be5568d3756f8b89">CharTraits::isASCII</a></div><div class="ttdeci">static bool isASCII(char character) noexcept</div><div class="ttdef"><b>Definition:</b> String.h:51</div></div>
<div class="ttc" id="aclass_url_html"><div class="ttname"><a href="class_url.html">Url</a></div><div class="ttdoc">Uniform Resource Locator (URL)</div><div class="ttdef"><b>Definition:</b> Url.h:38</div></div>
<div class="ttc" id="aclass_file_html"><div class="ttname"><a href="class_file.html">File</a></div><div class="ttdoc">File.</div><div class="ttdef"><b>Definition:</b> File.h:37</div></div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div><div class="ttdoc">The general exception class.</div><div class="ttdef"><b>Definition:</b> Exception.h:39</div></div>
<div class="ttc" id="aclass_unsigned_integer_html"><div class="ttname"><a href="class_unsigned_integer.html">UnsignedInteger</a></div><div class="ttdoc">Unsigned integer.</div><div class="ttdef"><b>Definition:</b> UnsignedInteger.h:30</div></div>
<div class="ttc" id="aclass_string_html"><div class="ttname"><a href="class_string.html">String</a></div><div class="ttdoc">String.</div><div class="ttdef"><b>Definition:</b> String.h:101</div></div>
<div class="ttc" id="aclass_string_html_a956785ad5fbd5c770fa488890a271181"><div class="ttname"><a href="class_string.html#a956785ad5fbd5c770fa488890a271181">String::indexOf</a></div><div class="ttdeci">MemoryDiff indexOf(char ch, MemorySize start=0) const noexcept</div></div>
<div class="ttc" id="aclass_file_html_a335979c8b00259c29ac1a2784cb4dfd4a646ec9705a761ff7e96b6c4f78720ba5"><div class="ttname"><a href="class_file.html#a335979c8b00259c29ac1a2784cb4dfd4a646ec9705a761ff7e96b6c4f78720ba5">File::TRUNCATE</a></div><div class="ttdeci">@ TRUNCATE</div><div class="ttdef"><b>Definition:</b> File.h:68</div></div>
<div class="ttc" id="aclass_string_output_stream_html"><div class="ttname"><a href="class_string_output_stream.html">StringOutputStream</a></div><div class="ttdoc">String output stream.</div><div class="ttdef"><b>Definition:</b> StringOutputStream.h:86</div></div>
<div class="ttc" id="aclass_string_html_ab31a36bda8c789ba3c0ed37bb16c978c"><div class="ttname"><a href="class_string.html#ab31a36bda8c789ba3c0ed37bb16c978c">String::isEmpty</a></div><div class="ttdeci">bool isEmpty() const noexcept</div><div class="ttdef"><b>Definition:</b> String.h:475</div></div>
<div class="ttc" id="aclass_inet_end_point_html_aa99ae24dc2401d68c213a83e9d597556"><div class="ttname"><a href="class_inet_end_point.html#aa99ae24dc2401d68c213a83e9d597556">InetEndPoint::getPort</a></div><div class="ttdeci">unsigned short getPort() const noexcept</div><div class="ttdef"><b>Definition:</b> InetEndPoint.h:127</div></div>
<div class="ttc" id="aclass_array_html_a137f2cae7d1ade1316b2a0d10ffaccde"><div class="ttname"><a href="class_array.html#a137f2cae7d1ade1316b2a0d10ffaccde">Array::getSize</a></div><div class="ttdeci">MemorySize getSize() const noexcept</div><div class="ttdef"><b>Definition:</b> Array.h:339</div></div>
<div class="ttc" id="aclass_server_socket_html_a1d693235f0e95e16c4df28775e8fdba3"><div class="ttname"><a href="class_server_socket.html#a1d693235f0e95e16c4df28775e8fdba3">ServerSocket::getName</a></div><div class="ttdeci">void getName() noexcept</div><div class="ttdef"><b>Definition:</b> ServerSocket.h:117</div></div>
<div class="ttc" id="aclass_format_input_stream_html"><div class="ttname"><a href="class_format_input_stream.html">FormatInputStream</a></div><div class="ttdoc">Reader of formatted input.</div><div class="ttdef"><b>Definition:</b> FormatInputStream.h:32</div></div>
<div class="ttc" id="aclass_object_html"><div class="ttname"><a href="class_object.html">Object</a></div><div class="ttdoc">Object.</div><div class="ttdef"><b>Definition:</b> Object.h:28</div></div>
<div class="ttc" id="aclass_double_linked_node_read_enumerator_html_a7394eb7fd5e6776e56931ada238bf480"><div class="ttname"><a href="class_double_linked_node_read_enumerator.html#a7394eb7fd5e6776e56931ada238bf480">DoubleLinkedNodeReadEnumerator::next</a></div><div class="ttdeci">Reference next()</div><div class="ttdef"><b>Definition:</b> DoubleLinkedNode.h:648</div></div>
<div class="ttc" id="aclass_invalid_format_html"><div class="ttname"><a href="class_invalid_format.html">InvalidFormat</a></div><div class="ttdoc">Invalid formation exception.</div><div class="ttdef"><b>Definition:</b> InvalidFormat.h:29</div></div>
<div class="ttc" id="aclass_double_linked_node_read_enumerator_html_af224dec383bf510a7074b8572c3add78"><div class="ttname"><a href="class_double_linked_node_read_enumerator.html#af224dec383bf510a7074b8572c3add78">DoubleLinkedNodeReadEnumerator::hasNext</a></div><div class="ttdeci">bool hasNext() const noexcept</div><div class="ttdef"><b>Definition:</b> DoubleLinkedNode.h:640</div></div>
<div class="ttc" id="aclass_application_html"><div class="ttname"><a href="class_application.html">Application</a></div><div class="ttdoc">Application.</div><div class="ttdef"><b>Definition:</b> Application.h:53</div></div>
<div class="ttc" id="aclass_string_output_stream_html_a5961bae1abf412a65744385e536cc029"><div class="ttname"><a href="class_string_output_stream.html#a5961bae1abf412a65744385e536cc029">StringOutputStream::getString</a></div><div class="ttdeci">const String &amp; getString() const</div></div>
<div class="ttc" id="aclass_inet_address_html_a0637f5d2643bb73099679339eb1e97c3"><div class="ttname"><a href="class_inet_address.html#a0637f5d2643bb73099679339eb1e97c3">InetAddress::getAddress</a></div><div class="ttdeci">const uint8 * getAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> InetAddress.h:222</div></div>
<div class="ttc" id="aclass_file_html_a335979c8b00259c29ac1a2784cb4dfd4ae98c4bc1eaf89a65baa406458c743382"><div class="ttname"><a href="class_file.html#a335979c8b00259c29ac1a2784cb4dfd4ae98c4bc1eaf89a65baa406458c743382">File::CREATE</a></div><div class="ttdeci">@ CREATE</div><div class="ttdef"><b>Definition:</b> File.h:67</div></div>
<div class="ttc" id="aclass_server_socket_html"><div class="ttname"><a href="class_server_socket.html">ServerSocket</a></div><div class="ttdoc">Server socket.</div><div class="ttdef"><b>Definition:</b> ServerSocket.h:30</div></div>
<div class="ttc" id="aclass_list_html"><div class="ttname"><a href="class_list.html">List</a></div><div class="ttdoc">List collection.</div><div class="ttdef"><b>Definition:</b> List.h:45</div></div>
<div class="ttc" id="aclass_timer_html"><div class="ttname"><a href="class_timer.html">Timer</a></div><div class="ttdoc">Timer.</div><div class="ttdef"><b>Definition:</b> Timer.h:27</div></div>
<div class="ttc" id="aclass_stream_socket_html_a7de21334ca8a2b37708e0f712426da5a"><div class="ttname"><a href="class_stream_socket.html#a7de21334ca8a2b37708e0f712426da5a">StreamSocket::read</a></div><div class="ttdeci">unsigned int read(uint8 *buffer, unsigned int size, bool nonblocking=false)</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:365</div></div>
<div class="ttc" id="aclass_array_html"><div class="ttname"><a href="class_array.html">Array&lt; String &gt;</a></div></div>
<div class="ttc" id="aclass_stream_socket_html_a9640edd848c5bac3517d23bafad06f23"><div class="ttname"><a href="class_stream_socket.html#a9640edd848c5bac3517d23bafad06f23">StreamSocket::getLocalAddress</a></div><div class="ttdeci">const InetAddress &amp; getLocalAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> StreamSocket.h:179</div></div>
<div class="ttc" id="aclass_server_socket_html_a87de644b3b1194bb7a8faa6e99e46673"><div class="ttname"><a href="class_server_socket.html#a87de644b3b1194bb7a8faa6e99e46673">ServerSocket::getLocalAddress</a></div><div class="ttdeci">const InetAddress &amp; getLocalAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> ServerSocket.h:125</div></div>
<div class="ttc" id="aclass_inet_address_html"><div class="ttname"><a href="class_inet_address.html">InetAddress</a></div><div class="ttdoc">Internet Protocol address.</div><div class="ttdef"><b>Definition:</b> InetAddress.h:38</div></div>
<div class="ttc" id="aclass_timer_html_ab82c0b645c7b797b2a970812dc3617e3"><div class="ttname"><a href="class_timer.html#ab82c0b645c7b797b2a970812dc3617e3">Timer::getLiveMicroseconds</a></div><div class="ttdeci">uint64 getLiveMicroseconds() const noexcept</div><div class="ttdef"><b>Definition:</b> Timer.h:325</div></div>
<div class="ttc" id="aclass_file_html_adb1db6815e6eeb9b39c76da4a541ae18a20233714769e48aa46a386c3fd8e84d7"><div class="ttname"><a href="class_file.html#adb1db6815e6eeb9b39c76da4a541ae18a20233714769e48aa46a386c3fd8e84d7">File::WRITE</a></div><div class="ttdeci">@ WRITE</div><div class="ttdef"><b>Definition:</b> File.h:65</div></div>
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"></address>
</body>
</html>
